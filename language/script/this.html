<!DOCTYPE HTML>
<html lang="en" >
    <!-- Start book Introduction -->
    <head>
        <!-- head:start -->
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>this | Introduction</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.2.0">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-craftml/craftml.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.css">
        
    
    

        
    
    
    
    <link rel="prev" href="../../language/script/index.html" />
    

        <!-- head:end -->
    </head>
    <body>
        <script src="http://cdn.craftml.io/craftml-all-latest.js"></script>
<!-- body:start -->
        
    <div class="book" data-level="8.1" data-basepath="../.." data-revision="Thu Sep 03 2015 11:11:08 GMT-0600 (MDT)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="language/primitives/index.html">
            
                
                    <a href="../../language/primitives/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Primitives
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="language/primitives/3d/index.html">
            
                
                    <a href="../../language/primitives/3d/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        3D
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="language/primitives/3d/cube.html">
            
                
                    <a href="../../language/primitives/3d/cube.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.1.</b>
                        
                        cube
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="language/primitives/3d/cylinder.html">
            
                
                    <a href="../../language/primitives/3d/cylinder.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.2.</b>
                        
                        cylinder
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.1.3" data-path="language/primitives/3d/sphere.html">
            
                
                    <a href="../../language/primitives/3d/sphere.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.3.</b>
                        
                        sphere
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.1.4" data-path="language/primitives/3d/dome.html">
            
                
                    <a href="../../language/primitives/3d/dome.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.4.</b>
                        
                        dome
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.1.5" data-path="language/primitives/3d/prism.html">
            
                
                    <a href="../../language/primitives/3d/prism.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.5.</b>
                        
                        prism
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="language/primitives/2d/index.html">
            
                
                    <a href="../../language/primitives/2d/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        2D
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="language/primitives/2d/circle.html">
            
                
                    <a href="../../language/primitives/2d/circle.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.1.</b>
                        
                        circle
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="language/primitives/2d/rectangle.html">
            
                
                    <a href="../../language/primitives/2d/rectangle.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.2.</b>
                        
                        rectangle
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="language/primitives/2d/polygon.html">
            
                
                    <a href="../../language/primitives/2d/polygon.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.3.</b>
                        
                        polygon
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="language/primitives/2d/path.html">
            
                
                    <a href="../../language/primitives/2d/path.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.4.</b>
                        
                        path
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="language/structure/index.html">
            
                
                    <a href="../../language/structure/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Structure
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="language/structure/row.html">
            
                
                    <a href="../../language/structure/row.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        row
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="language/structure/col.html">
            
                
                    <a href="../../language/structure/col.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        col
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="language/structure/stack.html">
            
                
                    <a href="../../language/structure/stack.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        stack
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="language/structure/repeat.html">
            
                
                    <a href="../../language/structure/repeat.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        repeat
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="language/transform/index.html">
            
                
                    <a href="../../language/transform/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Transform
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="language/transform/translate.html">
            
                
                    <a href="../../language/transform/translate.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        translate
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="language/transform/scale.html">
            
                
                    <a href="../../language/transform/scale.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        scale
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="language/transform/rotate.html">
            
                
                    <a href="../../language/transform/rotate.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        rotate
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="language/transform/position.html">
            
                
                    <a href="../../language/transform/position.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        position
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="language/transform/size.html">
            
                
                    <a href="../../language/transform/size.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                        size
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="language/transform/center.html">
            
                
                    <a href="../../language/transform/center.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.</b>
                        
                        center
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="language/transform/land.html">
            
                
                    <a href="../../language/transform/land.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.7.</b>
                        
                        land
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="language/transform/crop.html">
            
                
                    <a href="../../language/transform/crop.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.8.</b>
                        
                        crop
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.9" data-path="language/transform/fit.html">
            
                
                    <a href="../../language/transform/fit.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.9.</b>
                        
                        fit
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.10" data-path="language/transform/mirror.html">
            
                
                    <a href="../../language/transform/mirror.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.10.</b>
                        
                        mirror
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="language/layout/index.html">
            
                
                    <a href="../../language/layout/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Layout
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="language/layout/lineup.html">
            
                
                    <a href="../../language/layout/lineup.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        lineup
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="language/layout/align.html">
            
                
                    <a href="../../language/layout/align.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        align
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="language/layout/center.html">
            
                
                    <a href="../../language/layout/center.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        center
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="language/layout/cut.html">
            
                
                    <a href="../../language/layout/cut.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                        cut
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="language/layout/intersect.html">
            
                
                    <a href="../../language/layout/intersect.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                        intersect
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="language/module/index.html">
            
                
                    <a href="../../language/module/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Module
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="language/module/craft.html">
            
                
                    <a href="../../language/module/craft.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        craft
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="language/module/parameter.html">
            
                
                    <a href="../../language/module/parameter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        parameter
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="language/module/content.html">
            
                
                    <a href="../../language/module/content.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        content
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="language/css/index.html">
            
                
                    <a href="../../language/css/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        CSS
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="language/css/color.html">
            
                
                    <a href="../../language/css/color.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        color
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="language/css/opacity.html">
            
                
                    <a href="../../language/css/opacity.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        opacity
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="language/html/index.html">
            
                
                    <a href="../../language/html/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        HTML
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="language/html/div.html">
            
                
                    <a href="../../language/html/div.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                        div
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="language/html/headings.html">
            
                
                    <a href="../../language/html/headings.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.</b>
                        
                        headings
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8" data-path="language/script/index.html">
            
                
                    <a href="../../language/script/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Script
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="8.1" data-path="language/script/this.html">
            
                
                    <a href="../../language/script/this.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.</b>
                        
                        this
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                Published with GitBook
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Share on Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Share on Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Share on Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Share on Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Share on Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    
    


    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../" >Introduction</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="this">this</h1>
<p><code>this</code> refers to the solid element that contains the script block.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">g</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;foo&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">cube</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">cube</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="stylus">
        this<span class="hljs-class">.id</span>
        <span class="hljs-comment">// =&gt; foo</span>

        this<span class="hljs-class">.children</span>
        <span class="hljs-comment">// =&gt; [cube]</span>
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">g</span>&gt;</span>
</code></pre>
<p><code>this.children</code> only contains solid elements constructed right <em>before</em> the script block; it does not contain solid elements <em>after</em> the script block that have not yet been constructed.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">g</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;foo&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">cube</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">cube</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="stylus">
        this<span class="hljs-class">.id</span>
        <span class="hljs-comment">// =&gt; foo</span>

        this<span class="hljs-class">.children</span>
        <span class="hljs-comment">// =&gt; [cube]</span>
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">sphere</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">sphere</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">g</span>&gt;</span>
</code></pre>
<p>In addition, source elements that do not generate solids will not be parts of  <code>this.children</code>.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">g</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;foo&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">param</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;foo&quot;</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;int&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">craft</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;bar&quot;</span> <span class="hljs-attribute">module</span>=<span class="hljs-value">&quot;XYZ123&quot;</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">cube</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">cube</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="stylus">
        this<span class="hljs-class">.id</span>
        <span class="hljs-comment">// =&gt; foo</span>

        this<span class="hljs-class">.children</span>
        <span class="hljs-comment">// =&gt; [cube]</span>
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">sphere</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">sphere</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">g</span>&gt;</span>
</code></pre>
<h2 id="adding-elements">Adding Elements</h2>
<pre><code class="lang-html">// source DOM
<span class="hljs-tag">&lt;<span class="hljs-title">g</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">cube</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">cube</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="stylus">
        this.<span class="hljs-function"><span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-string">&apos;&lt;sphere&gt;&lt;/sphere&gt;&apos;</span>)</span></span>
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">g</span>&gt;</span>

// =&gt; solid DOM
<span class="hljs-tag">&lt;<span class="hljs-title">g</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">cube</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">cube</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">sphere</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">sphere</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">g</span>&gt;</span>
</code></pre>
<p>The transformation between a source element and a solid element is not necessarily an one-to-one relationship. A source element may generate one or more solid elements or even none at all.</p>
<pre><code class="lang-html">// source DOM
<span class="hljs-tag">&lt;<span class="hljs-title">param</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;a&quot;</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;int&quot;</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">craft</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;bar&quot;</span> <span class="hljs-attribute">module</span>=<span class="hljs-value">&quot;craft-bar&quot;</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">cube</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">cube</span>&gt;</span>

// =&gt; solid DOM
<span class="hljs-tag">&lt;<span class="hljs-title">cube</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">cube</span>&gt;</span>
</code></pre>
<p>Similarly, a script tag can add more than one solid elements to the solid DOM.</p>
<pre><code class="lang-html">// source DOM
<span class="hljs-tag">&lt;<span class="hljs-title">g</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">sphere</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">sphere</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="stylus">
        this.<span class="hljs-function"><span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-string">&apos;&lt;cube&gt;&lt;/cube&gt;&apos;</span>)</span></span>
        this.<span class="hljs-function"><span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-string">&apos;&lt;cube&gt;&lt;/cube&gt;&apos;</span>)</span></span>
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">g</span>&gt;</span>

// =&gt; solid DOM
<span class="hljs-tag">&lt;<span class="hljs-title">g</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">sphere</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">sphere</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">cube</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">cube</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">cube</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">cube</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">g</span>&gt;</span>
</code></pre>
<p>Or it can add none at all.</p>
<pre><code class="lang-html">// source DOM
<span class="hljs-tag">&lt;<span class="hljs-title">g</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">sphere</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">sphere</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="1c">
        <span class="hljs-comment">// does nothing</span>
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">g</span>&gt;</span>

// =&gt; solid DOM
<span class="hljs-tag">&lt;<span class="hljs-title">g</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">sphere</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">sphere</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">g</span>&gt;</span>
</code></pre>
<p>Here are more examples.</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// add a cube</span>
<span class="hljs-keyword">this</span>.add(<span class="hljs-string">&apos;&lt;cube&gt;&lt;/cube&gt;&apos;</span>)

<span class="hljs-comment">// add a sphere</span>
<span class="hljs-keyword">this</span>.add(<span class="hljs-string">&apos;&lt;sphere&gt;&lt;/sphere&gt;&apos;</span>)

<span class="hljs-comment">// add a cube with parameters</span>
<span class="hljs-keyword">this</span>.add(<span class="hljs-string">&apos;&lt;cube size=&quot;10 5 5&quot;&gt;&lt;/cube&gt;&apos;</span>)

<span class="hljs-comment">// add a cube with template parameters</span>
<span class="hljs-keyword">this</span>.add(<span class="hljs-string">&apos;&lt;cube size=&quot;{{s}} 5 5&quot;&gt;&lt;/cube&gt;&apos;</span>)

<span class="hljs-comment">// add multiple cubes</span>
<span class="hljs-keyword">this</span>.add(<span class="hljs-string">&apos;&lt;cube/&gt;&lt;cube/&gt;&lt;cube/&gt;&lt;cube/&gt;&apos;</span>)
</code></pre>
<h3 id="asynchronous-construction">Asynchronous Construction</h3>
<p>Solid elements are constructed <em>asynchronously</em>. Why? Concurrency. Some elements may wait for files to be downloaded over the network. While waiting, the rendering engine can start working on constructing other elements, rather than being stuck waiting.</p>
<p>Consider the example below. Suppose the construction of <code>&lt;remote-object&gt;</code> involves downloading an STL file, which takes 1 second. The call to <code>this.add</code> will return immediately instead of blocking for 1 second. If we try to access the size of <code>&lt;remote-object&gt;</code> in the next line, we will get <code>undefined</code> because the object is still being constructed.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">g</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">cube</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">cube</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="stylus">
        this.<span class="hljs-function"><span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-string">&apos;&lt;remote-object&gt;&lt;/remote-object&gt;&apos;</span>)</span></span>
        <span class="hljs-comment">// return immediately</span>

        this<span class="hljs-class">.children</span>[<span class="hljs-number">1</span>]<span class="hljs-class">.size</span>
        <span class="hljs-comment">// =&gt; undefined</span>
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">g</span>&gt;</span>
</code></pre>
<p>What if we need to access the size or location of <code>&lt;remote-object&gt;</code>? We can do that in the next script block like this.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">g</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">cube</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">cube</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="stylus">
        this.<span class="hljs-function"><span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-string">&apos;&lt;remote-object&gt;&lt;/remote-object&gt;&apos;</span>)</span></span>
        <span class="hljs-comment">// return immediately</span>
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="stylus">
        this<span class="hljs-class">.children</span>[<span class="hljs-number">1</span>]<span class="hljs-class">.size</span>
        <span class="hljs-comment">// =&gt; {x: 10, y:10, z:10}</span>
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">g</span>&gt;</span>
</code></pre>
<p>The rendering engine ensures that all the pending child elements will get fully constructed before executing a new script block. In other words, solid elements added in one script block may not necessarily be fully constructed within the same script block, but will certainly be fully constructed before the next script block begins.</p>
<p>Q: Are transformation and layout methods also asynchronous?</p>
<p>No. All transformation and layout methods are synchronous because they are compute-bound operations (matrix mulplitcations ... etc.) and do not involve I/O operations.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">g</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">cube</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">cube</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="stylus">
        <span class="hljs-tag">var</span> c = this<span class="hljs-class">.children</span>[<span class="hljs-number">0</span>]
        <span class="hljs-comment">// =&gt; c === &lt;cube&gt;</span>

        c<span class="hljs-class">.size</span><span class="hljs-class">.x</span>
        <span class="hljs-comment">// =&gt; 10</span>

        c.<span class="hljs-function"><span class="hljs-title">scale</span><span class="hljs-params">(<span class="hljs-number">2</span>)</span></span>

        c<span class="hljs-class">.size</span><span class="hljs-class">.x</span>
        <span class="hljs-comment">// =&gt; 20 (the effect is immediate)</span>
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">g</span>&gt;</span>
</code></pre>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../language/script/index.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Script"><i class="fa fa-angle-left"></i></a>
        
        
    </div>
</div>

        
<script src="../../gitbook/app.js"></script>

    
    <script src="../../gitbook/plugins/gitbook-plugin-craftml/craftml.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-toggle-chapters/toggle.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-livereload/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        <!-- body:end -->
    </body>
    <!-- End of book Introduction -->
</html>
